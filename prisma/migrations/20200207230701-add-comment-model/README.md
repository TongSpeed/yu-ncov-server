# Migration `20200207230701-add-comment-model`

This migration has been generated by fastspeeed at 2/7/2020, 11:07:01 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
PRAGMA foreign_keys=OFF;

CREATE TABLE "quaint"."new_Country" (
    "continents" TEXT   ,
    "id" TEXT NOT NULL  ,
    "title" TEXT NOT NULL DEFAULT '' ,
    PRIMARY KEY ("id")
) 

INSERT INTO "quaint"."new_Country" ("continents", "id", "title") SELECT "continents", "id", "title" FROM "quaint"."Country"

DROP TABLE "quaint"."Country";

ALTER TABLE "quaint"."new_Country" RENAME TO "Country";

CREATE UNIQUE INDEX "quaint"."Country.title" ON "Country"("title")

PRAGMA "quaint".foreign_key_check;

PRAGMA foreign_keys=ON;

PRAGMA foreign_keys=OFF;

CREATE TABLE "quaint"."new_CountryRecord" (
    "confirmedAddCount" INTEGER   ,
    "confirmedCount" INTEGER NOT NULL DEFAULT 0 ,
    "country" TEXT NOT NULL  ,
    "createdAt" DATE NOT NULL DEFAULT '1970-01-01 00:00:00' ,
    "curedAddCount" INTEGER   ,
    "curedCount" INTEGER NOT NULL DEFAULT 0 ,
    "deadAddCount" INTEGER   ,
    "deadCount" INTEGER NOT NULL DEFAULT 0 ,
    "id" TEXT NOT NULL  ,
    "recordAt" DATE NOT NULL DEFAULT '1970-01-01 00:00:00' ,
    "seriousAddCount" INTEGER   ,
    "seriousCount" INTEGER   ,
    "sourceUrl" TEXT NOT NULL DEFAULT '' ,
    "suspectedAddCount" INTEGER   ,
    "suspectedCount" INTEGER NOT NULL DEFAULT 0 ,
    "updatedAt" DATE NOT NULL DEFAULT '1970-01-01 00:00:00' ,
    "virus" TEXT NOT NULL  ,
    PRIMARY KEY ("id"),FOREIGN KEY ("country") REFERENCES "Country"("id") ON DELETE RESTRICT,
FOREIGN KEY ("virus") REFERENCES "VirusInfo"("id") ON DELETE RESTRICT
) 

INSERT INTO "quaint"."new_CountryRecord" ("confirmedAddCount", "confirmedCount", "country", "createdAt", "curedAddCount", "curedCount", "deadAddCount", "deadCount", "id", "recordAt", "seriousAddCount", "seriousCount", "sourceUrl", "suspectedAddCount", "suspectedCount", "updatedAt", "virus") SELECT "confirmedAddCount", "confirmedCount", "country", "createdAt", "curedAddCount", "curedCount", "deadAddCount", "deadCount", "id", "recordAt", "seriousAddCount", "seriousCount", "sourceUrl", "suspectedAddCount", "suspectedCount", "updatedAt", "virus" FROM "quaint"."CountryRecord"

DROP TABLE "quaint"."CountryRecord";

ALTER TABLE "quaint"."new_CountryRecord" RENAME TO "CountryRecord";

PRAGMA "quaint".foreign_key_check;

PRAGMA foreign_keys=ON;

PRAGMA foreign_keys=OFF;

CREATE TABLE "quaint"."new_ProvinceRecord" (
    "confirmedCount" INTEGER NOT NULL DEFAULT 0 ,
    "country" TEXT NOT NULL  ,
    "createdAt" DATE NOT NULL DEFAULT '1970-01-01 00:00:00' ,
    "curedCount" INTEGER NOT NULL DEFAULT 0 ,
    "deadCount" INTEGER NOT NULL DEFAULT 0 ,
    "id" TEXT NOT NULL  ,
    "province" TEXT NOT NULL  ,
    "recordAt" DATE NOT NULL DEFAULT '1970-01-01 00:00:00' ,
    "sourceUrl" TEXT NOT NULL DEFAULT '' ,
    "suspectedCount" INTEGER NOT NULL DEFAULT 0 ,
    "updatedAt" DATE NOT NULL DEFAULT '1970-01-01 00:00:00' ,
    "virus" TEXT NOT NULL  ,
    PRIMARY KEY ("id"),FOREIGN KEY ("country") REFERENCES "Country"("id") ON DELETE RESTRICT,
FOREIGN KEY ("province") REFERENCES "Province"("id") ON DELETE RESTRICT,
FOREIGN KEY ("virus") REFERENCES "VirusInfo"("id") ON DELETE RESTRICT
) 

INSERT INTO "quaint"."new_ProvinceRecord" ("confirmedCount", "country", "createdAt", "curedCount", "deadCount", "id", "province", "recordAt", "sourceUrl", "suspectedCount", "updatedAt", "virus") SELECT "confirmedCount", "country", "createdAt", "curedCount", "deadCount", "id", "province", "recordAt", "sourceUrl", "suspectedCount", "updatedAt", "virus" FROM "quaint"."ProvinceRecord"

DROP TABLE "quaint"."ProvinceRecord";

ALTER TABLE "quaint"."new_ProvinceRecord" RENAME TO "ProvinceRecord";

PRAGMA "quaint".foreign_key_check;

PRAGMA foreign_keys=ON;

PRAGMA foreign_keys=OFF;

CREATE TABLE "quaint"."new_CityRecord" (
    "city" TEXT NOT NULL  ,
    "confirmedCount" INTEGER NOT NULL DEFAULT 0 ,
    "country" TEXT NOT NULL  ,
    "createdAt" DATE NOT NULL DEFAULT '1970-01-01 00:00:00' ,
    "curedCount" INTEGER NOT NULL DEFAULT 0 ,
    "deadCount" INTEGER NOT NULL DEFAULT 0 ,
    "id" TEXT NOT NULL  ,
    "province" TEXT NOT NULL  ,
    "recordAt" DATE NOT NULL DEFAULT '1970-01-01 00:00:00' ,
    "sourceUrl" TEXT NOT NULL DEFAULT '' ,
    "suspectedCount" INTEGER NOT NULL DEFAULT 0 ,
    "updatedAt" DATE NOT NULL DEFAULT '1970-01-01 00:00:00' ,
    "virus" TEXT NOT NULL  ,
    PRIMARY KEY ("id"),FOREIGN KEY ("country") REFERENCES "Country"("id") ON DELETE RESTRICT,
FOREIGN KEY ("province") REFERENCES "Province"("id") ON DELETE RESTRICT,
FOREIGN KEY ("city") REFERENCES "City"("id") ON DELETE RESTRICT,
FOREIGN KEY ("virus") REFERENCES "VirusInfo"("id") ON DELETE RESTRICT
) 

INSERT INTO "quaint"."new_CityRecord" ("city", "confirmedCount", "country", "createdAt", "curedCount", "deadCount", "id", "province", "recordAt", "sourceUrl", "suspectedCount", "updatedAt", "virus") SELECT "city", "confirmedCount", "country", "createdAt", "curedCount", "deadCount", "id", "province", "recordAt", "sourceUrl", "suspectedCount", "updatedAt", "virus" FROM "quaint"."CityRecord"

DROP TABLE "quaint"."CityRecord";

ALTER TABLE "quaint"."new_CityRecord" RENAME TO "CityRecord";

PRAGMA "quaint".foreign_key_check;

PRAGMA foreign_keys=ON;
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200207224830-add-comment-model..20200207230701-add-comment-model
--- datamodel.dml
+++ datamodel.dml
@@ -1,7 +1,7 @@
 datasource db {
   provider = "sqlite"
-  url = "***"
+  url      = "file:dev.db"
   default  = true
 }
 generator client {
@@ -31,9 +31,9 @@
 model Country {
   id       String     @default(cuid()) @id
   title    String     @unique
-  continents String
+  continents String?
   provinces Province[]
 }
 model Province {
@@ -69,26 +69,18 @@
   suspectedCount Int
   confirmedCount Int
   curedCount     Int
   deadCount      Int
-  seriousCount   Int
-  suspectedAddCount Int
-  confirmedAddCount Int
-  curedAddCount     Int
-  deadAddCount      Int
-  seriousAddCount   Int
+  seriousCount   Int?
+  suspectedAddCount Int?
+  confirmedAddCount Int?
+  curedAddCount     Int?
+  deadAddCount      Int?
+  seriousAddCount   Int?
   recordAt       DateTime  
   createdAt      DateTime  @default(now())
   updatedAt      DateTime  @updatedAt
-  suspectedCountAdd Int
-  confirmedCountAdd Int
-  curedCountAdd     Int
-  deadCountAdd      Int
-  suspectedCountAddRate Int
-  confirmedCountAddRate Int
-  curedCountAddRate     Int
-  deadCountAddRate      Int
 }
 model ProvinceRecord {
   id             String    @default(cuid()) @id
@@ -105,12 +97,8 @@
   createdAt      DateTime  @default(now())
   updatedAt      DateTime  @updatedAt
-  suspectedCountAddRate Int
-  confirmedCountAddRate Int
-  curedCountAddRate     Int
-  deadCountAddRate      Int
 }
 model CityRecord {
   id             String    @default(cuid()) @id
@@ -126,12 +114,9 @@
   recordAt       DateTime  
   createdAt      DateTime  @default(now())
   updatedAt      DateTime  @updatedAt
-  suspectedCountAddRate Int
-  confirmedCountAddRate Int
-  curedCountAddRate     Int
-  deadCountAddRate      Int
+ 
 }
 model VirusRecord {
   id             String    @default(cuid()) @id
   country        Country
```


